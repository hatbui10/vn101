<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ª± ƒëo√°n D√£y Nh·ªã Ph√¢n 5-bit T·ªëi ∆∞u</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .input-section {
            background: #f7fafc;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            margin-bottom: 30px;
        }
        
        .input-section h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .sequence-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            resize: vertical;
            min-height: 150px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .sequence-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }
        
        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
        
        .analysis-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .analysis-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .analysis-card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .frequency-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .frequency-table th,
        .frequency-table td {
            padding: 8px;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        
        .frequency-table th {
            background: #e9ecef;
            font-weight: bold;
        }
        
        .frequency-table .bit-0 {
            background: #f8d7da;
        }
        
        .frequency-table .bit-1 {
            background: #d4edda;
        }
        
        .prediction-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }
        
        .prediction-section.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .prediction-label {
            font-size: 18px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .prediction-value {
            font-size: 48px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px 30px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .confidence-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .confidence-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .pattern-list {
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border-radius: 5px;
            padding: 10px;
        }
        
        .pattern-item {
            display: flex;
            justify-content: space-between;
            padding: 5px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .pattern-sequence {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        .pattern-count {
            color: #667eea;
            font-weight: bold;
        }
        
        .method-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            background: #e9ecef;
            color: #495057;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .method-content {
            margin-top: 15px;
        }
        
        .bit-grid-container {
            max-height: 400px;
            overflow-y: auto;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .add-sequence-btn {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .sequences-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .sequence-row {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .sequence-label {
            font-weight: bold;
            color: #495057;
            min-width: 80px;
        }
        
        .sequence-bits {
            display: flex;
            gap: 8px;
        }
        
        .bit-input-small {
            width: 40px;
            height: 40px;
            font-size: 18px;
            text-align: center;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
            background: white;
        }
        
        .bit-input-small:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: scale(1.05);
        }
        
        .bit-input-small.valid {
            border-color: #48bb78;
            background: #f0fff4;
        }
        
        .bit-input-small.invalid {
            border-color: #f56565;
            background: #fff5f5;
        }
        
        .remove-sequence-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .remove-sequence-btn:hover {
            background: #c82333;
        }
        
        .sequence-complete {
            background: #d4edda;
            border-color: #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ D·ª± ƒëo√°n D√£y Nh·ªã Ph√¢n 5-bit T·ªëi ∆∞u</h1>
        
        <div class="input-section">
            <h2>Nh·∫≠p d·ªØ li·ªáu l·ªãch s·ª≠ (20-30 d√£y nh·ªã ph√¢n 5-bit)</h2>
            
            <div class="input-methods">
                <div class="method-tabs">
                    <button class="tab-btn active" onclick="switchMethod('textarea')">Nh·∫≠p nhanh</button>
                    <button class="tab-btn" onclick="switchMethod('bitgrid')">Nh·∫≠p t·ª´ng bit</button>
                </div>
                
                <div id="textareaMethod" class="method-content">
                    <textarea id="historicalData" class="sequence-input" placeholder="Nh·∫≠p c√°c d√£y nh·ªã ph√¢n 5-bit, m·ªói d√£y tr√™n m·ªôt d√≤ng. V√≠ d·ª•:&#10;10101&#10;11010&#10;00111&#10;..."></textarea>
                </div>
                
                <div id="bitgridMethod" class="method-content" style="display: none;">
                    <div class="bit-grid-container">
                        <div class="add-sequence-btn">
                            <button onclick="addNewSequence()">+ Th√™m d√£y m·ªõi</button>
                        </div>
                        <div id="sequencesGrid" class="sequences-grid"></div>
                    </div>
                </div>
            </div>
            
            <div class="error-message" id="inputError"></div>
            
            <div class="button-group">
                <button onclick="analyzeData()">Ph√¢n t√≠ch d·ªØ li·ªáu</button>
                <button onclick="clearData()">X√≥a d·ªØ li·ªáu</button>
                <button onclick="loadSampleData()">T·∫£i d·ªØ li·ªáu m·∫´u</button>
            </div>
        </div>
        
        <div id="analysisResults" class="analysis-section" style="display: none;">
            <div class="analysis-card">
                <h3>üìä T·∫ßn su·∫•t bit theo v·ªã tr√≠</h3>
                <table id="frequencyTable" class="frequency-table">
                    <thead>
                        <tr>
                            <th>V·ªã tr√≠</th>
                            <th>Bit 0</th>
                            <th>Bit 1</th>
                            <th>Ch·ªçn</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            
            <div class="analysis-card">
                <h3>üîÑ C√°c d√£y l·∫∑p l·∫°i</h3>
                <div id="patternList" class="pattern-list"></div>
            </div>
            
            <div class="analysis-card">
                <h3>üìà Th·ªëng k√™</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div id="totalSequences" class="stat-value">0</div>
                        <div class="stat-label">T·ªïng d√£y</div>
                    </div>
                    <div class="stat-item">
                        <div id="uniqueSequences" class="stat-value">0</div>
                        <div class="stat-label">D√£y ƒë·ªôc nh·∫•t</div>
                    </div>
                    <div class="stat-item">
                        <div id="mostCommon" class="stat-value">-</div>
                        <div class="stat-label">D√£y ph·ªï bi·∫øn</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="predictionSection" class="prediction-section">
            <div class="prediction-label">üé≤ D·ª± ƒëo√°n t·ªëi ∆∞u cho l·∫ßn ti·∫øp theo:</div>
            <div id="predictionValue" class="prediction-value">00000</div>
            
            <div class="confidence-info">
                <div>M·ª©c ƒë·ªô tin c·∫≠y: <span id="confidenceLevel">0%</span></div>
                <div class="confidence-bar">
                    <div id="confidenceFill" class="confidence-fill" style="width: 0%"></div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div id="methodUsed" class="stat-value">-</div>
                        <div class="stat-label">Ph∆∞∆°ng ph√°p</div>
                    </div>
                    <div class="stat-item">
                        <div id="improvement" class="stat-value">0%</div>
                        <div class="stat-label">C·∫£i thi·ªán</div>
                    </div>
                    <div class="stat-item">
                        <div id="expectedAccuracy" class="stat-value">0%</div>
                        <div class="stat-label">ƒê·ªô ch√≠nh x√°c d·ª± ki·∫øn</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let historicalSequences = [];
        let frequencyMatrix = [];
        let patternFrequency = {};
        let sequenceCount = 0;
        let currentMethod = 'textarea';

        function switchMethod(method) {
            currentMethod = method;
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide methods
            if (method === 'textarea') {
                document.getElementById('textareaMethod').style.display = 'block';
                document.getElementById('bitgridMethod').style.display = 'none';
            } else {
                document.getElementById('textareaMethod').style.display = 'none';
                document.getElementById('bitgridMethod').style.display = 'block';
                if (sequenceCount === 0) {
                    addNewSequence(); // Add first sequence if empty
                }
            }
        }

        function addNewSequence() {
            sequenceCount++;
            const grid = document.getElementById('sequencesGrid');
            
            const sequenceRow = document.createElement('div');
            sequenceRow.className = 'sequence-row';
            sequenceRow.id = `sequence-${sequenceCount}`;
            
            sequenceRow.innerHTML = `
                <span class="sequence-label">D√£y ${sequenceCount}:</span>
                <div class="sequence-bits">
                    <input type="text" class="bit-input-small" maxlength="1" data-sequence="${sequenceCount}" data-pos="1">
                    <input type="text" class="bit-input-small" maxlength="1" data-sequence="${sequenceCount}" data-pos="2">
                    <input type="text" class="bit-input-small" maxlength="1" data-sequence="${sequenceCount}" data-pos="3">
                    <input type="text" class="bit-input-small" maxlength="1" data-sequence="${sequenceCount}" data-pos="4">
                    <input type="text" class="bit-input-small" maxlength="1" data-sequence="${sequenceCount}" data-pos="5">
                </div>
                <button class="remove-sequence-btn" onclick="removeSequence(${sequenceCount})">X√≥a</button>
            `;
            
            grid.appendChild(sequenceRow);
            
            // Add event listeners to new inputs
            sequenceRow.querySelectorAll('.bit-input-small').forEach(input => {
                input.addEventListener('input', function() {
                    validateBitInput(this);
                });
                
                input.addEventListener('keypress', function(e) {
                    const char = String.fromCharCode(e.which);
                    if (!/[01]/.test(char) && e.which !== 8 && e.which !== 46) {
                        e.preventDefault();
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.which === 8 && !this.value) {
                        handleBackspace(this);
                    }
                });
            });
            
            // Focus first input
            setTimeout(() => {
                sequenceRow.querySelector('.bit-input-small').focus();
            }, 100);
        }

        function removeSequence(seqId) {
            const element = document.getElementById(`sequence-${seqId}`);
            if (element) {
                element.remove();
                checkAutoAnalyze();
            }
        }

        function validateBitInput(input) {
            const value = input.value.trim();
            const errorElement = document.getElementById('inputError');
            
            // Reset error
            errorElement.style.display = 'none';
            errorElement.textContent = '';
            
            // Only allow 0 and 1
            if (value && !/^[01]$/.test(value)) {
                input.classList.remove('valid');
                input.classList.add('invalid');
                errorElement.textContent = 'Ch·ªâ ƒë∆∞·ª£c nh·∫≠p 0 ho·∫∑c 1';
                errorElement.style.display = 'block';
                return false;
            }
            
            // If valid
            if (value && /^[01]$/.test(value)) {
                input.classList.remove('invalid');
                input.classList.add('valid');
                
                // Auto move to next input
                setTimeout(() => {
                    moveToNextBit(input);
                    checkAutoAnalyze();
                }, 50);
                
                return true;
            }
            
            // If empty
            input.classList.remove('valid', 'invalid');
            return false;
        }

        function moveToNextBit(currentInput) {
            const sequence = parseInt(currentInput.dataset.sequence);
            const pos = parseInt(currentInput.dataset.pos);
            
            // If not the last bit in sequence
            if (pos < 5) {
                const nextInput = document.querySelector(`[data-sequence="${sequence}"][data-pos="${pos + 1}"]`);
                if (nextInput) {
                    nextInput.focus();
                }
            } else {
                // If last bit, move to next sequence
                const nextSequence = sequence + 1;
                const nextSeqFirstInput = document.querySelector(`[data-sequence="${nextSequence}"][data-pos="1"]`);
                if (nextSeqFirstInput) {
                    nextSeqFirstInput.focus();
                } else {
                    // If no next sequence, add new one
                    addNewSequence();
                }
            }
        }

        function handleBackspace(currentInput) {
            const sequence = parseInt(currentInput.dataset.sequence);
            const pos = parseInt(currentInput.dataset.pos);
            
            if (pos > 1) {
                const prevInput = document.querySelector(`[data-sequence="${sequence}"][data-pos="${pos - 1}"]`);
                if (prevInput) {
                    event.preventDefault();
                    prevInput.focus();
                    prevInput.value = '';
                    prevInput.classList.remove('valid', 'invalid');
                }
            }
        }

        function checkAutoAnalyze() {
            const allInputs = document.querySelectorAll('.bit-input-small');
            let filledCount = 0;
            let validCount = 0;
            
            allInputs.forEach(input => {
                if (input.value) filledCount++;
                if (input.classList.contains('valid')) validCount++;
            });
            
            // If we have at least 20 complete sequences, auto analyze
            if (validCount >= 20 && validCount === filledCount) {
                setTimeout(() => {
                    analyzeBitGridData();
                }, 500);
            }
        }

        function analyzeBitGridData() {
            const sequences = getSequencesFromGrid();
            if (sequences.length < 10) {
                document.getElementById('inputError').textContent = 'Vui l√≤ng nh·∫≠p √≠t nh·∫•t 10 d√£y ƒë·ªÉ ph√¢n t√≠ch ch√≠nh x√°c';
                document.getElementById('inputError').style.display = 'block';
                return;
            }
            
            historicalSequences = sequences;
            
            // Update textarea for consistency
            document.getElementById('historicalData').value = sequences.join('\n');
            
            // Continue with normal analysis
            performAnalysis();
        }

        function getSequencesFromGrid() {
            const sequences = [];
            const rows = document.querySelectorAll('.sequence-row');
            
            rows.forEach(row => {
                const bits = row.querySelectorAll('.bit-input-small');
                let sequence = '';
                let isValid = true;
                
                bits.forEach(bit => {
                    if (bit.value && bit.classList.contains('valid')) {
                        sequence += bit.value;
                    } else {
                        isValid = false;
                    }
                });
                
                if (isValid && sequence.length === 5) {
                    sequences.push(sequence);
                }
            });
            
            return sequences;
        }

        function validateInput() {
            if (currentMethod === 'bitgrid') {
                const sequences = getSequencesFromGrid();
                if (sequences.length < 10) {
                    document.getElementById('inputError').textContent = 'Vui l√≤ng nh·∫≠p √≠t nh·∫•t 10 d√£y ƒë·ªÉ ph√¢n t√≠ch ch√≠nh x√°c';
                    document.getElementById('inputError').style.display = 'block';
                    return false;
                }
                return sequences;
            } else {
                const textarea = document.getElementById('historicalData');
                const errorElement = document.getElementById('inputError');
                const lines = textarea.value.trim().split('\n').filter(line => line.trim());
                
                // Reset error
                errorElement.style.display = 'none';
                errorElement.textContent = '';
                
                // Check sequence count
                if (lines.length < 10) {
                    errorElement.textContent = 'Vui l√≤ng nh·∫≠p √≠t nh·∫•t 10 d√£y ƒë·ªÉ ph√¢n t√≠ch ch√≠nh x√°c';
                    errorElement.style.display = 'block';
                    return false;
                }
                
                // Validate each sequence
                const sequences = [];
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    if (!/^[01]+$/.test(line)) {
                        errorElement.textContent = `D√£y ${i + 1} ch·ªâ ƒë∆∞·ª£c ch·ª©a 0 v√† 1`;
                        errorElement.style.display = 'block';
                        return false;
                    }
                    
                    if (line.length !== 5) {
                        errorElement.textContent = `D√£y ${i + 1} ph·∫£i c√≥ ƒë√∫ng 5 bits`;
                        errorElement.style.display = 'block';
                        return false;
                    }
                    
                    sequences.push(line);
                }
                
                return sequences;
            }
        }

        function analyzeData() {
            const sequences = validateInput();
            if (!sequences) return;
            
            historicalSequences = sequences;
            performAnalysis();
        }

        function performAnalysis() {
            // Calculate frequency matrix
            frequencyMatrix = Array(5).fill(null).map(() => ({0: 0, 1: 0}));
            
            historicalSequences.forEach(seq => {
                for (let i = 0; i < 5; i++) {
                    const bit = parseInt(seq[i]);
                    frequencyMatrix[i][bit]++;
                }
            });
            
            // Calculate pattern frequency
            patternFrequency = {};
            historicalSequences.forEach(seq => {
                patternFrequency[seq] = (patternFrequency[seq] || 0) + 1;
            });
            
            // Display analysis results
            displayAnalysisResults();
            
            // Generate prediction
            generatePrediction();
        }

        function displayAnalysisResults() {
            const analysisSection = document.getElementById('analysisResults');
            analysisSection.style.display = 'grid';
            
            // Display frequency table
            const tbody = document.querySelector('#frequencyTable tbody');
            tbody.innerHTML = '';
            
            for (let i = 0; i < 5; i++) {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = `Bit ${i + 1}`;
                
                const zeroCell = row.insertCell(1);
                zeroCell.textContent = frequencyMatrix[i][0];
                zeroCell.className = 'bit-0';
                
                const oneCell = row.insertCell(2);
                oneCell.textContent = frequencyMatrix[i][1];
                oneCell.className = 'bit-1';
                
                const chosenBit = frequencyMatrix[i][1] > frequencyMatrix[i][0] ? '1' : '0';
                row.insertCell(3).textContent = chosenBit;
            }
            
            // Display patterns
            const patternList = document.getElementById('patternList');
            patternList.innerHTML = '';
            
            const sortedPatterns = Object.entries(patternFrequency)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // Top 10 patterns
            
            sortedPatterns.forEach(([seq, count]) => {
                const item = document.createElement('div');
                item.className = 'pattern-item';
                item.innerHTML = `
                    <span class="pattern-sequence">${seq}</span>
                    <span class="pattern-count">${count} l·∫ßn</span>
                `;
                patternList.appendChild(item);
            });
            
            // Display statistics
            document.getElementById('totalSequences').textContent = historicalSequences.length;
            document.getElementById('uniqueSequences').textContent = Object.keys(patternFrequency).length;
            
            const mostCommonSeq = Object.entries(patternFrequency)
                .sort((a, b) => b[1] - a[1])[0];
            document.getElementById('mostCommon').textContent = mostCommonSeq ? mostCommonSeq[0] : '-';
        }

        function generatePrediction() {
            let prediction = '';
            let method = '';
            let confidence = 0;
            
            // Method 1: Choose most common sequence
            const mostCommonSeq = Object.entries(patternFrequency)
                .sort((a, b) => b[1] - a[1])[0];
            
            if (mostCommonSeq && mostCommonSeq[1] >= 3) {
                prediction = mostCommonSeq[0];
                method = 'D√£y ph·ªï bi·∫øn';
                confidence = (mostCommonSeq[1] / historicalSequences.length) * 100;
            } else {
                // Method 2: Based on frequency matrix
                for (let i = 0; i < 5; i++) {
                    prediction += frequencyMatrix[i][1] > frequencyMatrix[i][0] ? '1' : '0';
                }
                method = 'T·∫ßn su·∫•t bit';
                
                // Calculate average confidence
                let totalConfidence = 0;
                for (let i = 0; i < 5; i++) {
                    const maxFreq = Math.max(frequencyMatrix[i][0], frequencyMatrix[i][1]);
                    totalConfidence += (maxFreq / historicalSequences.length) * 100;
                }
                confidence = totalConfidence / 5;
            }
            
            // Display prediction
            displayPrediction(prediction, method, confidence);
        }

        function displayPrediction(prediction, method, confidence) {
            const predictionSection = document.getElementById('predictionSection');
            const predictionValue = document.getElementById('predictionValue');
            const confidenceLevel = document.getElementById('confidenceLevel');
            const confidenceFill = document.getElementById('confidenceFill');
            const methodUsed = document.getElementById('methodUsed');
            const improvement = document.getElementById('improvement');
            const expectedAccuracy = document.getElementById('expectedAccuracy');
            
            predictionValue.textContent = prediction;
            confidenceLevel.textContent = `${confidence.toFixed(1)}%`;
            confidenceFill.style.width = `${confidence}%`;
            methodUsed.textContent = method;
            
            // Calculate improvement over random
            const randomProb = 3.125; // 1/32
            const improvementPercent = ((confidence - randomProb) / randomProb * 100).toFixed(1);
            improvement.textContent = `${improvementPercent}%`;
            expectedAccuracy.textContent = `${confidence.toFixed(1)}%`;
            
            // Show section with animation
            predictionSection.classList.add('show');
        }

        function clearData() {
            document.getElementById('historicalData').value = '';
            document.getElementById('inputError').style.display = 'none';
            document.getElementById('analysisResults').style.display = 'none';
            document.getElementById('predictionSection').classList.remove('show');
            document.getElementById('sequencesGrid').innerHTML = '';
            historicalSequences = [];
            frequencyMatrix = [];
            patternFrequency = {};
            sequenceCount = 0;
        }

        function loadSampleData() {
            const sampleData = [
                '10101', '11010', '00111', '11100', '01011',
                '10010', '01101', '11001', '00110', '10110',
                '01100', '10011', '01001', '10100', '11000',
                '00101', '01010', '10111', '11011', '00100',
                '11101', '00011', '01110', '10001', '11110',
                '00001', '01111', '10000', '11111', '00010'
            ];
            
            document.getElementById('historicalData').value = sampleData.join('\n');
        }
    </script>
</body>
</html>
